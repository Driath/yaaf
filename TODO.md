# TODO

## In Progress

- [x] PR #3 merged: https://github.com/Driath/yaaf/pull/3
- [x] PR #4 merged: Security rules
- [x] PR #5 merged: workflow:pr reads context
- [x] PR #6 merged: Workflow handoff rule

## Skills to Implement/Improve

### skill:check
- [x] Read `skill:format:out` dynamically (DRY design-system)
- [x] Validate Output section against format
- [x] Add `--all` to validate all skills
- [x] Generate/update `ia/state/skills.md`
- [x] Encourage E2E testing in notes

### workflow:check
- [x] Create `workflow:check` skill (V1)
- [x] Inherit from skill:check (workflow IS skill)
- [x] Validate sub-skills exist
- [x] Generate/update `ia/state/workflows.md`
- [ ] V2: Validate sub-skills are themselves validated (read `ia/state/skills.md`)
- [ ] V2: Call `skill:check` on each sub-skill (deep validation)
- [ ] V2: Validate orchestration flow (coherent steps)
- [ ] V2: Encourage/require documented E2E test

## Architecture

### Agnostic Skills Refactor
- [ ] Move skill content to `ia/skills/{skill-name}/SKILL.md` (agnostic)
- [ ] Keep `.claude/skills/{skill-name}/SKILL.md` as Claude-specific wrapper
- [ ] Wrapper contains: Claude frontmatter (allowed-tools, agent) + import directive
- [ ] Define import syntax: `import: ia/skills/{skill-name}`
- [ ] Migrate existing skills progressively

## State Files

- [x] `ia/state/skills.md` - generated by `skill:check --all`
- [x] `ia/state/workflows.md` - generated by `workflow:check --all`

### State separation (NEW)
- [ ] `skill/scripts/log.ts` - log skill executions to `ia/state/skills.json`
- [ ] `skill/SKILL.md` - add instruction to call log.ts at start/end
- [ ] `session/scripts/*` - manage `ia/state/session/current.json` (workflow tracking)
- [ ] Each domain owns its state file (separation of concerns)

## Session Flow

- [x] When TODO.md all done → fallback to `ia/my-work.md` work items
- [x] `/start` skill - analyze TODO.md + history.json to suggest best next task
- [ ] Auto-suggest workflows based on context (e.g., pending tickets → workflow:feature)
- [ ] Define when to auto-run `skill:check` / `workflow:check` (UX decision)

## workflow (global rules)

- [ ] `workflow:end` should save session history to `ia/state/sessions/` for later analysis
- [ ] Session history format: `[{skill, calledBy, timestamp, response}]`
- [ ] Calculate and display workflow duration (start → end timestamps)
- [ ] Use `session/scripts/save.ts` to archive sessions

### code:review
- [ ] Check code is in English (comments, variables, docs) - translate if French found

## Cleanup

- [ ] Remove "Background Monitoring" rule from `workflow/SKILL.md` (not its responsibility)
