---
name: skill:check
description: Validate a skill against Agent Skills spec and yaaf best practices
---

# skill:check

Validate a skill's structure, format, and compliance with the Agent Skills specification and yaaf framework conventions.

## Usage

```bash
/skill:check {skill-name}
/skill:check --all
```

**Arguments:**
- `{skill-name}` - Name of the skill to validate (e.g., `git:pr:create`, `workflow:pr`)
- `--all` - Validate all skills and generate state file

## Instructions

### 1. Load Design-System

**IMPORTANT:** Read `/skill:format:out` FIRST to get current output format rules. Do not hardcode these rules.

```
Read .claude/skills/skill:format:out/SKILL.md
Extract:
- Required sections: Actions, Corrections, Notes
- Header format: ✅ {skill-name} completed
- Rules for each section
```

### 2. Handle --all Flag

If `--all` is specified:
```
1. List all skills: ls .claude/skills/*/SKILL.md
2. For each skill, run validation (steps 3-6)
3. Aggregate results
4. Generate ia/state/skills.md (step 7)
5. Output summary
```

### 3. Locate and Read Skill

```bash
# Locate skill directory
.claude/skills/{skill-name}/SKILL.md

# Read and count lines
wc -l < SKILL.md
```

### 4. Validate Structure

| Check | Error Code | How |
|-------|------------|-----|
| SKILL.md exists | E001 | File exists |
| Valid YAML frontmatter | E002 | Starts with `---`, valid YAML |
| Required fields | E003 | `name` and `description` present |
| Name matches directory | E004 | frontmatter.name == directory name |
| Body content exists | E005 | Content after frontmatter |

### 5. Validate Content

| Check | Code | How |
|-------|------|-----|
| Progressive disclosure | W001 | Lines < 500 (warning if exceeded) |
| Has Usage section | W002 | Contains `## Usage` |
| Has Instructions section | W002 | Contains `## Instructions` |
| References valid | E009 | All `[text](path)` links resolve |

### 6. Validate Output Format (DRY)

Using rules from step 1:

| Check | Code | How |
|-------|------|-----|
| Has Output section | W011 | Contains `## Output` |
| References skill:format:out | W012 | Contains "Follow `/skill:format:out`" or shows format |
| Shows required sections | W013 | Output example has Actions, Corrections, Notes |

**Note:** Primitives (`skill`, `workflow`) and meta-skills (`skill:check`, `skill:format:out`) are exempt from output format validation.

### 7. Generate State File (--all only)

Create/update `ia/state/skills.md`:

```markdown
# Skills State

> Auto-generated by `/skill:check --all`
> Last updated: {timestamp}

| Skill | Type | Score | Status | Missing |
|-------|------|-------|--------|---------|
| git:pr:create | skill | 8/12 (67%) | ⚠️ | Output, E2E |
| git:pr:monitor | skill | 8/12 (67%) | ⚠️ | Output, E2E |
| workflow:pr | workflow | 8/12 (67%) | ⚠️ | Output, E2E |
| skill:check | meta | 11/12 (92%) | ⚠️ | E2E |

## Scoring System

| Category | Checks | Points |
|----------|--------|--------|
| Structure | E001-E005 (exists, frontmatter, fields, name match, body) | 5 |
| Content | Usage section, Instructions section, <500 lines | 3 |
| Output Format | Has ## Output, refs skill:format:out, shows sections | 3 |
| E2E Tested | Documented test execution | 1 |
| **Total** | | **12** |

## Status Thresholds

| Status | Score | Meaning |
|--------|-------|---------|
| ✅ OK | 100% | Production ready |
| ⚠️ Warning | 50-99% | Functional but incomplete |
| ❌ Critical | <50% | Not usable |

## Exemptions

Primitives and meta-skills have reduced total (exempt from Output Format):
- `skill`, `workflow`: 9/9 max
- `skill:check`, `skill:format:out`, `skill:design`: 9/9 max
```

### 8. Output Results

```
Checking skill: {skill-name}

✅ Structure
  ✅ SKILL.md exists
  ✅ Valid YAML frontmatter
  ✅ Name matches directory
  ✅ Required fields present

✅ Content
  ✅ Body content present ({lines} lines)
  {⚠️ W001 if > 500 lines}
  ✅ References valid

✅ Output Format
  ✅ Has Output section
  ✅ References skill:format:out
  ✅ Required sections documented

Summary: {passed} passed, {warnings} warnings, {errors} errors

{If warnings or errors, list fixes}
```

For `--all`:
```
Checking all skills...

{individual results}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Total: {n} skills checked
✅ {passed} valid
⚠️  {warnings} with warnings
❌ {errors} with errors

State file updated: ia/state/skills.md
```

## Error Codes

### Errors (Must Fix)

| Code | Issue |
|------|-------|
| E001 | SKILL.md not found |
| E002 | Invalid YAML frontmatter |
| E003 | Missing required field (name/description) |
| E004 | Name doesn't match directory |
| E005 | No body content |
| E009 | Broken reference link |

### Warnings (Should Fix)

| Code | Issue |
|------|-------|
| W001 | SKILL.md > 500 lines |
| W002 | Missing recommended section |
| W011 | No Output section |
| W012 | Doesn't reference skill:format:out |
| W013 | Output missing required sections |

## Exemptions

These skills are exempt from output format validation:

| Skill | Reason |
|-------|--------|
| `skill` | Primitive - defines rules, not executed |
| `workflow` | Primitive - defines rules, not executed |
| `skill:format:out` | Meta - defines the format itself |
| `skill:check` | Meta - validates others |
| `skill:design` | Meta - design documentation |

## Examples

**Single skill:**
```bash
/skill:check git:pr:monitor
```

**All skills with state generation:**
```bash
/skill:check --all
# → Generates ia/state/skills.md
```

## Output

Follow `/skill:format:out`:

```
---
✅ skill:check completed

## Actions
- Validated {skill-name}
- Checked structure, content, output format
- {if --all} Generated ia/state/skills.md

## Result
| Check | Status |
|-------|--------|
| Structure | ✅ / ❌ |
| Content | ✅ / ⚠️ |
| Output Format | ✅ / ⚠️ / N/A |

## Corrections
- (none)

## Notes
- {any observations}
- Consider adding E2E test documentation to reach 100% score
---
```

## Notes

**E2E Testing Encouraged:** Skills that document a tested execution example (input → output) score higher. Add an `## E2E Test` section showing a real invocation and expected result to reach 100% validation score.
